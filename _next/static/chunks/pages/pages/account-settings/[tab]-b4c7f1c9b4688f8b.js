(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8708],{6983:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pages/account-settings/[tab]",function(){return a(31162)}])},1479:function(e,t,a){"use strict";var n=a(85893),r=a(87357),s=a(66242),i=a(15861),l=a(44267),o=a(63730),c=a(60155);let d=e=>{let{sx:t,icon:a,stats:d,title:u,subtitle:p,trendDiff:x,iconSize:m=24,avatarSize:h=38,trend:g="positive",avatarColor:Z="primary"}=e;return(0,n.jsx)(s.Z,{sx:{...t},children:(0,n.jsxs)(l.Z,{sx:{gap:3,display:"flex",justifyContent:"space-between"},children:[(0,n.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,n.jsx)(i.Z,{sx:{mb:1,color:"text.secondary"},children:u}),(0,n.jsxs)(r.Z,{sx:{mb:1,columnGap:1.5,display:"flex",flexWrap:"wrap",alignItems:"center"},children:[(0,n.jsx)(i.Z,{variant:"h4",children:d}),(0,n.jsx)(i.Z,{sx:{color:"negative"===g?"error.main":"success.main"},children:"(".concat(x,")%")})]}),(0,n.jsx)(i.Z,{variant:"h6",sx:{color:"text.secondary"},children:p})]}),(0,n.jsx)(c.Z,{skin:"light",variant:"rounded",color:Z,sx:{width:h,height:h},children:(0,n.jsx)(o.Z,{icon:a,fontSize:m})})]})})};t.Z=d},56456:function(e,t,a){"use strict";var n=a(85893),r=a(67294),s=a(90948),i=a(50135);let l=(0,s.ZP)(i.Z)(e=>{let{theme:t}=e;return{alignItems:"flex-start","& .MuiInputLabel-root":{transform:"none",lineHeight:1.154,position:"relative",marginBottom:t.spacing(1),fontSize:t.typography.body2.fontSize,color:"".concat(t.palette.text.primary," !important")},"& .MuiInputBase-root":{borderRadius:8,backgroundColor:"transparent !important",border:"1px solid rgba(".concat(t.palette.customColors.main,", 0.2)"),transition:t.transitions.create(["border-color","box-shadow"],{duration:t.transitions.duration.shorter}),"&:not(.Mui-focused):not(.Mui-disabled):not(.Mui-error):hover":{borderColor:"rgba(".concat(t.palette.customColors.main,", 0.28)")},"&:before, &:after":{display:"none"},"&.MuiInputBase-sizeSmall":{borderRadius:6},"&.Mui-error":{borderColor:t.palette.error.main},"&.Mui-focused":{boxShadow:t.shadows[2],"& .MuiInputBase-input:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transform:"translateX(4px)"},"&.MuiInputBase-colorPrimary":{borderColor:t.palette.primary.main},"&.MuiInputBase-colorSecondary":{borderColor:t.palette.secondary.main},"&.MuiInputBase-colorInfo":{borderColor:t.palette.info.main},"&.MuiInputBase-colorSuccess":{borderColor:t.palette.success.main},"&.MuiInputBase-colorWarning":{borderColor:t.palette.warning.main},"&.MuiInputBase-colorError":{borderColor:t.palette.error.main},"&.Mui-error":{borderColor:t.palette.error.main}},"&.Mui-disabled":{backgroundColor:"".concat(t.palette.action.selected," !important")},"& .MuiInputAdornment-root":{marginTop:"0 !important"}},"& .MuiInputBase-input":{color:t.palette.text.secondary,"&:not(textarea)":{padding:"15.5px 13px"},"&:not(textarea).MuiInputBase-inputSizeSmall":{padding:"7.5px 13px"},"&:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter})},"&.MuiInputBase-inputAdornedStart:not(.MuiAutocomplete-input)":{paddingLeft:0},"&.MuiInputBase-inputAdornedEnd:not(.MuiAutocomplete-input)":{paddingRight:0}},"& .MuiFormHelperText-root":{lineHeight:1.154,margin:t.spacing(1,0,0),color:t.palette.text.secondary,fontSize:t.typography.body2.fontSize,"&.Mui-error":{color:t.palette.error.main}},"& .MuiSelect-select:focus, & .MuiNativeSelect-select:focus":{backgroundColor:"transparent"},"& .MuiSelect-filled .MuiChip-root":{height:22},"& .MuiAutocomplete-input":{paddingLeft:"6px !important",paddingTop:"7.5px !important",paddingBottom:"7.5px !important","&.MuiInputBase-inputSizeSmall":{paddingLeft:"6px !important",paddingTop:"2.5px !important",paddingBottom:"2.5px !important"}},"& .MuiAutocomplete-inputRoot":{paddingTop:"8px !important",paddingLeft:"8px !important",paddingBottom:"8px !important","&:not(.MuiInputBase-sizeSmall).MuiInputBase-adornedStart":{paddingLeft:"13px !important"},"&.MuiInputBase-sizeSmall":{paddingTop:"5px !important",paddingLeft:"5px !important",paddingBottom:"5px !important","& .MuiAutocomplete-tag":{margin:2,height:22}}},"& .MuiInputBase-multiline":{padding:"15.25px 13px","&.MuiInputBase-sizeSmall":{padding:"7.25px 13px"},"& textarea.MuiInputBase-inputSizeSmall:placeholder-shown":{overflowX:"hidden"}},"& + .react-datepicker__close-icon":{top:11,"&:after":{fontSize:"1.6rem !important"}}}}),o=(0,r.forwardRef)((e,t)=>{let{size:a="small",InputLabelProps:r,...s}=e;return(0,n.jsx)(l,{size:a,inputRef:t,...s,variant:"filled",InputLabelProps:{...r,shrink:!0}})});t.Z=o},31162:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return en},default:function(){return er}});var n=a(85893),r=a(67294),s=a(47949),i=a(11163),l=a(40044),o=a(87357),c=a(86886),d=a(55050),u=a(45670),p=a(15861),x=a(90948),m=a(98396),h=a(30298),g=a(98456),Z=a(63730),j=a(86501),f=a(66242),b=a(50657),v=a(69368),y=a(78445),S=a(94054),C=a(44267),w=a(6514),P=a(31425),_=a(56815),M=a(87109),k=a(11057),z=a(50480),I=a(93946),W=a(56456),D=a(87536),N=a(6154);let E={id:0,email:"",last_name:"",first_name:"",contact:"",user_status:"",user_role:""},B=()=>{(0,r.useEffect)(()=>{let e=localStorage.getItem("userData");if(e){let t=JSON.parse(e);L(t.id),en(t.id)}},[]);let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1),[l,d]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[g,B]=(0,r.useState)(!1),[R,A]=(0,r.useState)(!1),T=(0,i.useRouter)(),[U,O]=(0,r.useState)("yes"),[H,L]=(0,r.useState)(0),[F,G]=(0,r.useState)(E),[J,X]=(0,r.useState)(E),[Y,V]=(0,r.useState)(!1),{control:q,handleSubmit:Q,formState:{errors:K}}=(0,D.cI)({defaultValues:{checkbox:!1}}),$=()=>t(!1),ee=()=>V(!1),et=()=>t(!0),ea=e=>{$(),O(e),V(!0);let t="".concat("http://localhost:5000/").concat("api/user","/").concat(H);N.Z.delete(t).then(e=>{j.ZP.success(e.data.message),localStorage.remove("userData"),localStorage.remove("accessToken"),T.push("/login")})},en=async e=>{try{let t="".concat("http://localhost:5000/").concat("api/user","/").concat(e),a=await N.Z.get(t);return G(a.data),X(a.data),a.data}catch(e){return null}},er=(e,t)=>{G({...F,[e]:t})},es=async()=>{try{let e="".concat("http://localhost:5000/").concat("api/user","/").concat(H),t=await N.Z.put(e,F);j.ZP.success(t.data.message);let a=await en(H);if(!a)return;let n=localStorage.getItem("userData");if(n){let e=JSON.parse(n);e.fullName="".concat(a.last_name," ").concat(a.first_name),localStorage.setItem("userData",JSON.stringify(e))}}catch(e){}},ei=async()=>{if(!l){h("Please enter new password!");return}if(!u){h("Please enter confirm password!");return}if(l!==u){h("Confirm password incorrect!");return}let e="".concat("http://localhost:5000/").concat("api/user","/").concat(H),t=await N.Z.put(e,{password:l});j.ZP.success(t.data.message),s(!1),d(""),x(""),h("")};return(0,n.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,n.jsx)(c.ZP,{item:!0,xs:12,children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(y.Z,{title:"Profile Details"}),(0,n.jsx)("form",{children:(0,n.jsx)(C.Z,{children:(0,n.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,n.jsx)(c.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(W.Z,{fullWidth:!0,label:"First Name",placeholder:"John",value:F.first_name,onChange:e=>er("first_name",e.target.value)})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(W.Z,{fullWidth:!0,label:"Last Name",placeholder:"Doe",value:F.last_name,onChange:e=>er("last_name",e.target.value)})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(W.Z,{fullWidth:!0,type:"email",label:"Email",value:F.email,placeholder:"john.doe@example.com",onChange:e=>er("email",e.target.value)})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(W.Z,{fullWidth:!0,type:"number",label:"Phone Number",value:F.contact,placeholder:"202 555 0111",onChange:e=>er("contact",e.target.value),InputProps:{startAdornment:(0,n.jsx)(M.Z,{position:"start",children:"MY (+60)"})}})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(W.Z,{fullWidth:!0,label:"Role",placeholder:"Admin",value:F.user_role,disabled:!0})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(W.Z,{fullWidth:!0,label:"Status",placeholder:"Approved",value:F.user_status,disabled:!0})}),(0,n.jsxs)(c.ZP,{item:!0,xs:12,sx:{pt:e=>"".concat(e.spacing(6.5)," !important")},children:[(0,n.jsx)(k.Z,{onClick:()=>es(),variant:"contained",sx:{mr:4},children:"Save Changes"}),(0,n.jsx)(k.Z,{type:"reset",variant:"tonal",color:"secondary",onClick:()=>G(J),children:"Reset"})]})]})})})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(y.Z,{title:"Reset Password"}),(0,n.jsxs)(C.Z,{children:[(0,n.jsx)(D.Qr,{name:"checkbox",control:q,rules:{required:!0},render:e=>{let{field:t}=e;return(0,n.jsx)(z.Z,{label:"I want to reset password",sx:{"& .MuiTypography-root":{color:K.checkbox?"error.main":"text.secondary"}},control:(0,n.jsx)(v.Z,{...t,size:"small",onChange:e=>{s(e.target.checked)},sx:K.checkbox?{color:"error.main"}:null})})}}),a&&(0,n.jsx)(o.Z,{children:(0,n.jsxs)(c.ZP,{container:!0,spacing:6,mt:5,children:[(0,n.jsx)(c.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(W.Z,{fullWidth:!0,type:g?"text":"password",label:"Enter new password",placeholder:"********",value:l,onChange:e=>d(e.target.value),InputProps:{endAdornment:(0,n.jsx)(M.Z,{position:"end",children:(0,n.jsx)(I.Z,{edge:"end",onMouseDown:e=>e.preventDefault(),onClick:()=>B(!g),children:(0,n.jsx)(Z.Z,{fontSize:"1.25rem",icon:g?"tabler:eye":"tabler:eye-off"})})})}})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,sm:6}),(0,n.jsx)(c.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(W.Z,{fullWidth:!0,type:R?"text":"password",label:"Confirm new password",placeholder:"********",value:u,onChange:e=>x(e.target.value),InputProps:{endAdornment:(0,n.jsx)(M.Z,{position:"end",children:(0,n.jsx)(I.Z,{edge:"end",onMouseDown:e=>e.preventDefault(),onClick:()=>A(!R),children:(0,n.jsx)(Z.Z,{fontSize:"1.25rem",icon:R?"tabler:eye":"tabler:eye-off"})})})}})}),m&&(0,n.jsx)(c.ZP,{item:!0,xs:12,children:(0,n.jsx)(p.Z,{color:"error",children:m})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,children:(0,n.jsx)(k.Z,{variant:"contained",color:"inherit",onClick:ei,children:"Reset Password"})})]})})]})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(y.Z,{title:"Delete Account"}),(0,n.jsx)(C.Z,{children:(0,n.jsxs)("form",{onSubmit:Q(et),children:[(0,n.jsx)(o.Z,{sx:{mb:4},children:(0,n.jsxs)(S.Z,{children:[(0,n.jsx)(D.Qr,{name:"checkbox",control:q,rules:{required:!0},render:e=>{let{field:t}=e;return(0,n.jsx)(z.Z,{label:"I confirm my account deactivation",sx:{"& .MuiTypography-root":{color:K.checkbox?"error.main":"text.secondary"}},control:(0,n.jsx)(v.Z,{...t,size:"small",name:"validation-basic-checkbox",sx:K.checkbox?{color:"error.main"}:null})})}}),K.checkbox&&(0,n.jsx)(_.Z,{id:"validation-basic-checkbox",sx:{mx:0,color:"error.main",fontSize:e=>e.typography.body2.fontSize},children:"Please confirm you want to delete account"})]})}),(0,n.jsx)(k.Z,{variant:"contained",color:"error",type:"submit",disabled:void 0!==K.checkbox,children:"Deactivate Account"})]})})]})}),(0,n.jsxs)(b.Z,{fullWidth:!0,maxWidth:"xs",open:e,onClose:$,children:[(0,n.jsx)(w.Z,{sx:{pb:e=>"".concat(e.spacing(6)," !important"),px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pt:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:(0,n.jsxs)(o.Z,{sx:{display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"center","& svg":{mb:6,color:"warning.main"}},children:[(0,n.jsx)(Z.Z,{icon:"tabler:alert-circle",fontSize:"5.5rem"}),(0,n.jsx)(p.Z,{children:"Are you sure you would like to cancel your subscription?"})]})}),(0,n.jsxs)(P.Z,{sx:{justifyContent:"center",px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pb:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:[(0,n.jsx)(k.Z,{variant:"contained",sx:{mr:2},onClick:()=>ea("yes"),children:"Yes"}),(0,n.jsx)(k.Z,{variant:"tonal",color:"secondary",onClick:()=>ea("cancel"),children:"Cancel"})]})]}),(0,n.jsxs)(b.Z,{fullWidth:!0,maxWidth:"xs",open:Y,onClose:ee,children:[(0,n.jsx)(w.Z,{sx:{pb:e=>"".concat(e.spacing(6)," !important"),px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pt:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:(0,n.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"column","& svg":{mb:8,color:"yes"===U?"success.main":"error.main"}},children:[(0,n.jsx)(Z.Z,{fontSize:"5.5rem",icon:"yes"===U?"tabler:circle-check":"tabler:circle-x"}),(0,n.jsx)(p.Z,{variant:"h4",sx:{mb:5},children:"yes"===U?"Deleted!":"Cancelled"}),(0,n.jsx)(p.Z,{children:"yes"===U?"Your subscription cancelled successfully.":"Unsubscription Cancelled!!"})]})}),(0,n.jsx)(P.Z,{sx:{justifyContent:"center",px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pb:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:(0,n.jsx)(k.Z,{variant:"contained",color:"success",onClick:ee,children:"OK"})})]})]})};var R=a(38333),A=a(67720),T=a(18972),U=a(58468),O=a(50613),H=a(60155),L=a(1479);let F=e=>{let{value:t,handleFilter:a,toggle:s,setSelectedUserId:i}=e,l=(0,r.useCallback)(()=>{i(0),s()},[i,s]);return(0,n.jsxs)(o.Z,{sx:{py:4,px:6,rowGap:2,columnGap:4,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)(k.Z,{color:"secondary",variant:"tonal",startIcon:(0,n.jsx)(Z.Z,{icon:"tabler:upload"}),children:"Export"}),(0,n.jsxs)(o.Z,{sx:{rowGap:2,display:"flex",flexWrap:"wrap",alignItems:"center"},children:[(0,n.jsx)(W.Z,{value:t,sx:{mr:4},placeholder:"Search User",onChange:e=>a(e.target.value)}),(0,n.jsxs)(k.Z,{onClick:l,variant:"contained",sx:{"& svg":{mr:2}},children:[(0,n.jsx)(Z.Z,{fontSize:"1.125rem",icon:"tabler:plus"}),"Add New User"]})]})]})};var G=a(58826);let J=(0,x.ZP)(o.Z)(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(6),justifyContent:"space-between"}}),X={first_name:"",last_name:"",email:"",contact:"",password:"Eig123.",user_role_id:2,user_status_id:1},Y=e=>{let{open:t,toggle:a,userId:s}=e,[i,l]=(0,r.useState)(X),[c,d]=(0,r.useState)([]),[u,x]=(0,r.useState)([]),{reset:m,formState:{errors:h}}=(0,D.cI)({defaultValues:X});(0,r.useEffect)(()=>{let e=async()=>{if(0!==s){let e="".concat("http://localhost:5000/").concat("api/user","/").concat(s),{data:t}=await N.Z.get(e);l(t)}};e()},[s]),(0,r.useEffect)(()=>{let e=async()=>{let e="".concat("http://localhost:5000/").concat("api/allUserRole"),{data:t}=await N.Z.get(e);d(t||[])},t=async()=>{let e="".concat("http://localhost:5000/").concat("api/allUserStatus"),{data:t}=await N.Z.get(e);x(t||[])};e(),t()},[]);let g=(e,t)=>{l(a=>({...a,[e]:t}))},f=e=>{e.preventDefault(),0!==s?v():b()},b=async()=>{try{let e="".concat("http://localhost:5000/").concat("api/user"),t={last_name:i.last_name,first_name:i.first_name,email:i.email,contact:i.contact,password:i.password,user_role_id:i.user_role_id,user_status_id:i.user_status_id};await N.Z.post(e,t),j.ZP.success("User created successfully!"),y()}catch(a){var e,t;j.ZP.error((null==a?void 0:null===(e=a.response)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)||"Duplicated email")}},v=async()=>{try{let e="".concat("http://localhost:5000/").concat("api/user","/").concat(s),t={...i};await N.Z.put(e,t),j.ZP.success("User updated successfully!"),y()}catch(a){var e,t;j.ZP.error((null==a?void 0:null===(e=a.response)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)||"Update unsuccessful, please try again!")}},y=()=>{a(),m(X),l(X)};return(0,n.jsxs)(G.ZP,{open:t,anchor:"right",variant:"temporary",onClose:y,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{width:{xs:300,sm:400}}},children:[(0,n.jsxs)(J,{children:[(0,n.jsx)(p.Z,{variant:"h5",children:0!==s?"Edit User":"Add User"}),(0,n.jsx)(I.Z,{size:"small",onClick:y,sx:{p:"0.438rem",borderRadius:1,color:"text.primary",backgroundColor:"action.selected","&:hover":{backgroundColor:e=>"rgba(".concat(e.palette.customColors.main,", 0.16)")}},children:(0,n.jsx)(Z.Z,{icon:"tabler:x",fontSize:"1.125rem"})})]}),(0,n.jsx)(o.Z,{sx:{p:e=>e.spacing(0,6,6)},children:(0,n.jsxs)("form",{onSubmit:f,children:[(0,n.jsx)(W.Z,{fullWidth:!0,label:"First Name",value:i.first_name,onChange:e=>g("first_name",e.target.value),placeholder:"John",sx:{mb:4}}),(0,n.jsx)(W.Z,{fullWidth:!0,label:"Last Name",value:i.last_name,onChange:e=>g("last_name",e.target.value),placeholder:"Doe",sx:{mb:4}}),(0,n.jsx)(W.Z,{fullWidth:!0,type:"email",label:"Email",value:i.email,onChange:e=>g("email",e.target.value),placeholder:"johndoe@email.com",sx:{mb:4},error:!!h.email}),(0,n.jsx)(W.Z,{fullWidth:!0,type:"number",label:"Phone Number",value:i.contact,onChange:e=>g("contact",e.target.value),placeholder:"202 555 0111",sx:{mb:4},InputProps:{startAdornment:(0,n.jsx)(M.Z,{position:"start",children:"MY (+60)"})}}),(0,n.jsx)(W.Z,{select:!0,fullWidth:!0,label:"Select Role",value:i.user_role_id,onChange:e=>g("user_role_id",Number(e.target.value)),sx:{mb:4},children:c.map(e=>(0,n.jsx)(T.Z,{value:e.id,children:e.name},e.id))}),(0,n.jsx)(W.Z,{select:!0,fullWidth:!0,label:"Select Status",value:i.user_status_id,onChange:e=>g("user_status_id",Number(e.target.value)),sx:{mb:6},children:u.map(e=>(0,n.jsx)(T.Z,{value:e.id,children:e.name},e.id))}),(0,n.jsx)(k.Z,{type:"submit",variant:"contained",sx:{mr:3},children:"Submit"}),(0,n.jsx)(k.Z,{variant:"tonal",color:"secondary",onClick:y,children:"Cancel"})]})})]})},V={Admin:{icon:"tabler:device-laptop",color:"primary"},Driver:{icon:"tabler:truck-delivery",color:"secondary"}},q={Approved:"success",Pending:"warning",Suspended:"secondary",Rejected:"error"},Q=e=>{let{apiData:t}=e,a=e=>{let{id:t}=e,[a,s]=(0,r.useState)(null),i=e=>{s(e.currentTarget)},l=()=>{s(null)},o=()=>{P(t),Q(),l()},c=async()=>{let e="".concat("http://localhost:5000/").concat("api/user","/").concat(t),a=await N.Z.delete(e);D(),j.ZP.success(a.data.message)},d=()=>{c(),l()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.Z,{size:"small",onClick:i,children:(0,n.jsx)(Z.Z,{icon:"tabler:dots-vertical"})}),(0,n.jsxs)(R.Z,{keepMounted:!0,anchorEl:a,open:!!a,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[(0,n.jsxs)(T.Z,{onClick:o,sx:{"& svg":{mr:2}},children:[(0,n.jsx)(Z.Z,{icon:"tabler:edit",fontSize:20}),"Edit"]}),(0,n.jsxs)(T.Z,{onClick:d,sx:{"& svg":{mr:2}},children:[(0,n.jsx)(Z.Z,{icon:"tabler:trash",fontSize:20}),"Delete"]})]})]})},[s,i]=(0,r.useState)(""),[l,d]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),[g,b]=(0,r.useState)({page:0,pageSize:10}),[v,S]=(0,r.useState)([]),[w,P]=(0,r.useState)(0),[_,M]=(0,r.useState)([]),[k,z]=(0,r.useState)([]),D=async()=>{var e,t;try{let t={role:s||"",status:u||"",search:l||"",page:(null==g?void 0:g.page)+1||1,pageSize:(null==g?void 0:g.pageSize)||10},a="".concat("http://localhost:5000/").concat("api/allUser"),n=await N.Z.get(a,{params:t});S((null===(e=n.data)||void 0===e?void 0:e.users)||[]),b({page:(n.data.currentPage||1)-1,pageSize:n.data.pageSize||10})}catch(e){N.Z.isAxiosError(e)&&(null===(t=e.response)||void 0===t?void 0:t.status)===404?S([]):j.ZP.error("Failed to fetch users")}};(0,r.useEffect)(()=>{D()},[s,u,l,m]),(0,r.useEffect)(()=>{B(),E()},[]);let E=async()=>{let e="".concat("http://localhost:5000/").concat("api/allUserRole"),t=await N.Z.get(e);M(t.data||[])},B=async()=>{let e="".concat("http://localhost:5000/").concat("api/allUserStatus"),t=await N.Z.get(e);z(t.data||[])},G=(0,r.useCallback)(e=>{d(e)},[]),J=(0,r.useCallback)(e=>{i(e.target.value)},[]),X=(0,r.useCallback)(e=>{x(e.target.value)},[]),Q=()=>h(!m);return(0,n.jsxs)(c.ZP,{container:!0,spacing:6.5,children:[(0,n.jsx)(c.ZP,{item:!0,xs:12,children:t&&(0,n.jsx)(c.ZP,{container:!0,spacing:6,children:t.statsHorizontalWithDetails.map((e,t)=>(0,n.jsx)(c.ZP,{item:!0,xs:12,md:3,sm:6,children:(0,n.jsx)(L.Z,{...e})},t))})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(y.Z,{title:"Search Filters"}),(0,n.jsx)(C.Z,{children:(0,n.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,n.jsx)(c.ZP,{item:!0,sm:4,xs:12,children:(0,n.jsxs)(W.Z,{select:!0,fullWidth:!0,defaultValue:"Select Role",SelectProps:{value:s,displayEmpty:!0,onChange:e=>J(e)},children:[(0,n.jsx)(T.Z,{value:"",children:"Select Role"}),_.map(e=>(0,n.jsx)(T.Z,{value:e.id,children:e.name},e.id))]})}),(0,n.jsx)(c.ZP,{item:!0,sm:4,xs:12,children:(0,n.jsxs)(W.Z,{select:!0,fullWidth:!0,defaultValue:"Select Status",SelectProps:{value:u,displayEmpty:!0,onChange:e=>X(e)},children:[(0,n.jsx)(T.Z,{value:"",children:"Select Status"}),k.map(e=>(0,n.jsx)(T.Z,{value:e.id,children:e.name},e.id))]})})]})}),(0,n.jsx)(A.Z,{sx:{m:"0 !important"}}),(0,n.jsx)(F,{value:l,handleFilter:G,toggle:Q,setSelectedUserId:P}),(0,n.jsx)(U._,{autoHeight:!0,rowHeight:62,rows:v,columns:[{flex:.2,minWidth:200,field:"fullName",headerName:"User",renderCell:e=>{let{row:t}=e,{first_name:a,last_name:r,email:s}=t;return(0,n.jsx)(o.Z,{sx:{display:"flex",alignItems:"center"},children:(0,n.jsxs)(o.Z,{sx:{display:"flex",alignItems:"flex-start",flexDirection:"column"},children:[(0,n.jsxs)(p.Z,{noWrap:!0,sx:{fontWeight:500,textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:[r," ",a]}),(0,n.jsx)(p.Z,{noWrap:!0,variant:"body2",sx:{color:"text.disabled"},children:s})]})})}},{flex:.15,field:"role",minWidth:170,headerName:"Role",renderCell:e=>{let{row:t}=e;return(0,n.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(H.Z,{skin:"light",sx:{mr:4,width:30,height:30},color:V[t.user_role].color||"primary",children:(0,n.jsx)(Z.Z,{icon:V[t.user_role].icon})}),(0,n.jsx)(p.Z,{noWrap:!0,sx:{color:"text.secondary",textTransform:"capitalize"},children:t.user_role})]})}},{flex:.1,minWidth:110,field:"status",headerName:"Status",renderCell:e=>{let{row:t}=e;return(0,n.jsx)(O.Z,{rounded:!0,skin:"light",size:"small",label:t.user_status,color:q[t.user_status],sx:{textTransform:"capitalize"}})}},{flex:.1,minWidth:100,sortable:!1,field:"actions",headerName:"Actions",renderCell:e=>{let{row:t}=e;return(0,n.jsx)(a,{id:t.id})}}],disableRowSelectionOnClick:!0,pageSizeOptions:[5,10,25,50],paginationModel:g,onPaginationModelChange:b})]})}),(0,n.jsx)(Y,{open:m,toggle:Q,userId:w})]})},K=e=>{let{onEdit:t,onDelete:a}=e,[s,i]=(0,r.useState)(null),l=e=>{i(e.currentTarget)},o=()=>{i(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.Z,{size:"small",onClick:l,children:(0,n.jsx)(Z.Z,{icon:"tabler:dots-vertical"})}),(0,n.jsxs)(R.Z,{keepMounted:!0,anchorEl:s,open:!!s,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{minWidth:"8rem"}},children:[(0,n.jsxs)(T.Z,{onClick:()=>{t(),o()},sx:{"& svg":{mr:2}},children:[(0,n.jsx)(Z.Z,{icon:"tabler:edit",fontSize:20}),"Edit"]}),(0,n.jsxs)(T.Z,{onClick:()=>{a(),o()},sx:{"& svg":{mr:2}},children:[(0,n.jsx)(Z.Z,{icon:"tabler:trash",fontSize:20}),"Delete"]})]})]})},$=()=>{let[e,t]=(0,r.useState)({page:0,pageSize:10}),[a,s]=(0,r.useState)({page:0,pageSize:10}),[i,l]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),x=(0,r.useCallback)(async()=>{try{let e="".concat("http://localhost:5000/").concat("api/allUserRole"),t=await N.Z.get(e);l(t.data||[])}catch(e){j.ZP.error("Failed to fetch user roles")}},[]),m=(0,r.useCallback)(async()=>{try{let e="".concat("http://localhost:5000/").concat("api/allUserStatus"),t=await N.Z.get(e);u(t.data||[])}catch(e){j.ZP.error("Failed to fetch user statuses")}},[]);(0,r.useEffect)(()=>{x(),m()},[x,m]);let h=(0,r.useMemo)(()=>[{flex:.1,minWidth:200,field:"name",headerName:"Name",renderCell:e=>{let{row:t}=e;return(0,n.jsx)(o.Z,{sx:{display:"flex",alignItems:"center"},children:(0,n.jsx)(p.Z,{noWrap:!0,sx:{fontWeight:500,textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:t.name})})}},{flex:.3,field:"description",minWidth:170,headerName:"Description",renderCell:e=>{let{row:t}=e;return(0,n.jsx)(p.Z,{noWrap:!0,sx:{color:"text.secondary",textTransform:"capitalize"},children:t.description})}},{flex:.05,minWidth:100,sortable:!1,field:"actions",headerName:"Actions",renderCell:e=>{let{row:t}=e;return(0,n.jsx)(K,{onEdit:()=>console.log("Edit role: ".concat(t.id)),onDelete:()=>console.log("Delete role: ".concat(t.id))})}}],[]),g=(0,r.useMemo)(()=>[{flex:.1,minWidth:200,field:"name",headerName:"Name",renderCell:e=>{let{row:t}=e;return(0,n.jsx)(p.Z,{noWrap:!0,sx:{fontWeight:500,textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:t.name})}},{flex:.3,field:"description",minWidth:200,headerName:"Description",renderCell:e=>{let{row:t}=e;return(0,n.jsx)(p.Z,{noWrap:!0,sx:{color:"text.secondary",textTransform:"capitalize"},children:t.description})}}],[]);return(0,n.jsxs)(c.ZP,{container:!0,spacing:6.5,children:[(0,n.jsx)(c.ZP,{item:!0,xs:12,children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(y.Z,{title:"User Role"}),(0,n.jsx)(U._,{autoHeight:!0,rowHeight:62,rows:i,columns:h,disableRowSelectionOnClick:!0,pageSizeOptions:[5,10,25,50],paginationModel:e,onPaginationModelChange:t})]})}),(0,n.jsx)(A.Z,{}),(0,n.jsx)(c.ZP,{item:!0,xs:12,children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(y.Z,{title:"User Status"}),(0,n.jsx)(U._,{autoHeight:!0,rowHeight:62,rows:d,columns:g,disableRowSelectionOnClick:!0,pageSizeOptions:[5,10,25,50],paginationModel:a,onPaginationModelChange:s})]})})]})},ee=(0,x.ZP)(h.Z)(e=>{let{theme:t}=e;return{border:"0 !important","&, & .MuiTabs-scroller":{boxSizing:"content-box",padding:t.spacing(1.25,1.25,2),margin:"".concat(t.spacing(-1.25,-1.25,-2)," !important")},"& .MuiTabs-indicator":{display:"none"},"& .Mui-selected":{boxShadow:t.shadows[2],backgroundColor:t.palette.primary.main,color:"".concat(t.palette.common.white," !important")},"& .MuiTab-root":{minWidth:65,minHeight:38,lineHeight:1,borderRadius:t.shape.borderRadius,[t.breakpoints.up("md")]:{minWidth:130},"&:hover":{color:t.palette.primary.main}}}}),et=e=>{let{tab:t}=e,[a,x]=(0,r.useState)(t),[h,j]=(0,r.useState)(!1),f=(0,i.useRouter)(),b=(0,m.Z)(e=>e.breakpoints.down("md")),v=(0,r.useContext)(s.v),y=(e,t)=>{j(!0),f.push("/pages/account-settings/".concat(t.toLowerCase())).then(()=>j(!1))};(0,r.useEffect)(()=>{t&&t!==a&&x(t)},[t]);let S={account:(0,n.jsx)(B,{}),users:(0,n.jsx)(Q,{}),settings:(0,n.jsx)($,{})};return(0,n.jsx)(c.ZP,{container:!0,spacing:6,children:(0,n.jsx)(c.ZP,{item:!0,xs:12,children:(0,n.jsx)(u.ZP,{value:a,children:(0,n.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,n.jsx)(c.ZP,{item:!0,xs:12,children:(0,n.jsxs)(ee,{variant:"scrollable",scrollButtons:"auto",onChange:y,"aria-label":"customized tabs example",children:[(null==v?void 0:v.can("read","account"))&&(0,n.jsx)(l.Z,{value:"account",label:(0,n.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",...!b&&{"& svg":{mr:2}}},children:[(0,n.jsx)(Z.Z,{fontSize:"1.25rem",icon:"tabler:user"}),!b&&"Account"]})}),(null==v?void 0:v.can("read","users"))&&(0,n.jsx)(l.Z,{value:"users",label:(0,n.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",...!b&&{"& svg":{mr:2}}},children:[(0,n.jsx)(Z.Z,{fontSize:"1.25rem",icon:"tabler:users"}),!b&&"Users"]})}),(null==v?void 0:v.can("read","settings"))&&(0,n.jsx)(l.Z,{value:"settings",label:(0,n.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",...!b&&{"& svg":{mr:2}}},children:[(0,n.jsx)(Z.Z,{fontSize:"1.25rem",icon:"tabler:settings"}),!b&&"Settings"]})})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,children:h?(0,n.jsxs)(o.Z,{sx:{mt:6,display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,n.jsx)(g.Z,{sx:{mb:4}}),(0,n.jsx)(p.Z,{children:"Loading..."})]}):(0,n.jsx)(d.Z,{sx:{p:0},value:a,children:S[a]})})]})})})})};et.acl={action:"read",subject:"settings-page"};let ea=e=>{let{tab:t}=e;return(0,n.jsx)(et,{tab:t})};ea.acl={action:"read",subject:"settings-page"};var en=!0,er=ea}},function(e){e.O(0,[2569,7693,8468,7536,7397,9774,2888,179],function(){return e(e.s=6983)}),_N_E=e.O()}]);