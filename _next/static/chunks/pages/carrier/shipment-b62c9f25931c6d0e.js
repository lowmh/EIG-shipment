(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9338],{26140:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/carrier/shipment",function(){return i(48131)}])},33729:function(e,t,i){"use strict";var l=i(90948),r=i(87357),a=i(50591);let n=(0,l.ZP)(r.Z)(e=>{let{theme:t}=e,i=(0,a.Z)();return{[t.breakpoints.down("md")]:{"& .MuiStepper-horizontal:not(.MuiStepper-alternativeLabel)":{flexDirection:"column",alignItems:"flex-start"}},"& .MuiStep-root":{"& .step-label":{display:"flex",alignItems:"center",justifyContent:"center","& .MuiAvatar-root":{marginRight:t.spacing(4)}},"& .step-number":{fontWeight:"bold",fontSize:"2.125rem",marginRight:t.spacing(2.5),color:t.palette.text.primary},"& .step-title":{fontWeight:500,color:t.palette.text.primary,fontSize:t.typography.body1.fontSize},"& .step-subtitle":{color:t.palette.text.secondary,fontSize:t.typography.body2.fontSize},"& .MuiStepLabel-root.Mui-disabled":{"& .step-number":{color:t.palette.text.disabled}},"& .Mui-error":{"& .MuiStepLabel-labelContainer, & .step-number, & .step-title, & .step-subtitle":{color:t.palette.error.main}}},"& .MuiStepConnector-root":{"& .MuiStepConnector-line":{borderWidth:3,borderRadius:3},"&.Mui-active, &.Mui-completed":{"& .MuiStepConnector-line":{borderColor:t.palette.primary.main}},"&.Mui-disabled .MuiStepConnector-line":{borderColor:i.primaryLight.backgroundColor}},"& .MuiStepper-alternativeLabel":{"& .MuiStepConnector-root":{top:10},"& .MuiStepLabel-labelContainer":{display:"flex",alignItems:"center",flexDirection:"column","& > * + *":{marginTop:t.spacing(1)}}},"& .MuiStepper-vertical":{"& .MuiStep-root":{"& .step-label":{justifyContent:"flex-start"},"& .MuiStepContent-root":{borderWidth:3,marginLeft:t.spacing(2.25),borderColor:t.palette.primary.main},"& .button-wrapper":{marginTop:t.spacing(4)},"&.active + .MuiStepConnector-root .MuiStepConnector-line":{borderColor:t.palette.primary.main}},"& .MuiStepConnector-root":{marginLeft:t.spacing(2.25),"& .MuiStepConnector-line":{borderRadius:0}}}}});t.Z=n},48131:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return R}});var l=i(85893),r=i(86886),a=i(15861),n=i(67720),s=i(25358),o=i(67294),d=i(87357),c=i(66242),u=i(44472),m=i(11057),p=i(76624),h=i(83578),x=i(44267),b=i(78445),j=i(18972),Z=i(58468),g=i(9198),f=i.n(g),v=i(90948),y=i(2734),S=i(63730),_=i(50591);let C=(0,v.ZP)(d.Z)(()=>({width:20,height:20,borderWidth:3,borderRadius:"50%",borderStyle:"solid"})),P=e=>{let{active:t,completed:i,error:r}=e,a=(0,y.Z)(),n=(0,_.Z)();return r?(0,l.jsx)(S.Z,{icon:"tabler:alert-triangle",fontSize:20,color:a.palette.error.main,transform:"scale(1.2)"}):i?(0,l.jsx)(S.Z,{icon:"tabler:circle-check",fontSize:20,color:a.palette.primary.main,transform:"scale(1.2)"}):(0,l.jsx)(C,{sx:{borderColor:n.primaryLight.backgroundColor,...t&&{borderWidth:5,borderColor:"primary.main",backgroundColor:"light"===a.palette.mode?"common.white":"background.default"}}})};var w=i(56456),M=i(79268),W=i(86501),k=i(33729),D=i(6154),N=i(98456);let E=(0,o.forwardRef)((e,t)=>(0,l.jsx)(w.Z,{fullWidth:!0,...e,inputRef:t,label:"Date Deliver",autoComplete:"off"})),z=[{title:"BigCommerce Order",subtitle:"Enter order number"},{title:"Order Details",subtitle:"Check order & customer details"},{title:"Shipment Details",subtitle:"Enter delivery details"}],I=()=>{let[e,t]=(0,o.useState)(0),[i,s]=(0,o.useState)(!1),[g,v]=(0,o.useState)(""),[y,S]=(0,o.useState)(null),[_,C]=(0,o.useState)(""),[I,O]=(0,o.useState)({page:0,pageSize:5}),[L,R]=(0,o.useState)([]),[T,A]=(0,o.useState)(""),[F,q]=(0,o.useState)(0),[Y,B]=(0,o.useState)(new Date),[G,H]=(0,o.useState)([]),[V,X]=(0,o.useState)(0),[J,K]=(0,o.useState)([]),Q=(0,o.useMemo)(()=>[{flex:.2,minWidth:100,field:"product_name",headerName:"Product Name",renderCell:e=>{let{row:t}=e;return(0,l.jsx)(d.Z,{sx:{display:"flex",alignItems:"center"},children:(0,l.jsxs)(d.Z,{sx:{display:"flex",alignItems:"flex-start",flexDirection:"column"},children:[(0,l.jsx)(a.Z,{noWrap:!0,sx:{fontWeight:500,textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:t.product_name}),(0,l.jsx)(a.Z,{noWrap:!0,variant:"body2",sx:{color:"text.disabled"},children:t.product_sku})]})})}},{flex:.08,minWidth:20,field:"quantity",headerName:"Quantity",renderCell:e=>{let{row:t}=e;return(0,l.jsx)(a.Z,{noWrap:!0,sx:{fontWeight:500,textDecoration:"none",color:"text.secondary","&:hover":{color:"primary.main"}},children:t.quantity})}}],[]),U=()=>{C(""),t(e=>e-1)},$=async()=>{C("");let i={};if(0===e&&(!y||y.b2b_order_id!==g)){s(!0);try{let e="".concat("http://localhost:5000/").concat("api/bigCommerceOrder","/").concat(g),t=await D.Z.get(e);S(t.data),s(!1)}catch(e){var l,r;s(!1),C(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:r.message);return}let e="".concat("http://localhost:5000/").concat("api/imageGroup");await D.Z.post(e,{name:g})}if(e===z.length-1){if(T?F?Y?V?0===J.length&&(i.confirmImages="At least one image is required"):i.ETA="Please select an estimated time of arrival":i.EDA="Estimated delivery date is required":i.vehicle="Please select a vehicle":i.trackingNumber="Tracking number is required",Object.keys(i).length>0){Object.values(i).forEach(e=>W.ZP.error(e));return}try{let e=localStorage.getItem("userData");if(e){let t=JSON.parse(e),i={user_id:t.id,tracking_number:T,vehicle_id:F,eda_date:Y,eta_id:V,b2b_order_id:g,image_group_id:g,shipment_status_id:1,customer_name:null==y?void 0:y.customer_name,customer_email:null==y?void 0:y.customer_email,company_name:(null==y?void 0:y.company_name)||"",address:null==y?void 0:y.customer_address,postcode:null==y?void 0:y.address_zip,city:null==y?void 0:y.address_city,state:null==y?void 0:y.address_state,country:null==y?void 0:y.address_country,items:null==y?void 0:y.items},l="".concat("http://localhost:5000/").concat("api/shipment"),r=await D.Z.post(l,i),a="".concat("http://localhost:5000/").concat("api/imageGroup","/").concat(g);await D.Z.put(a,{shipmentStatus:"Shipped",files:J}),W.ZP.success(r.data.message)}}catch(e){W.ZP.error("Please try again!");return}}t(e=>e+1)},ee=()=>{v(""),S(null),A(""),q(0),B(new Date),X(0),K([]),t(0)},et=async()=>{let e="".concat("http://localhost:5000/").concat("api/allVehicle"),t=await D.Z.get(e);R(t.data)},ei=async()=>{let e="".concat("http://localhost:5000/").concat("api/allEta"),t=await D.Z.get(e);H(t.data)};return(0,o.useEffect)(()=>{et(),ei()},[]),(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(k.Z,{children:(0,l.jsx)(p.Z,{activeStep:e,alternativeLabel:!0,children:z.map((e,t)=>(0,l.jsx)(u.Z,{children:(0,l.jsx)(h.Z,{StepIconComponent:P,children:(0,l.jsx)("div",{className:"step-label",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(a.Z,{className:"step-title",children:e.title}),(0,l.jsx)(a.Z,{className:"step-subtitle",children:e.subtitle})]})})})},t))})}),(0,l.jsx)(c.Z,{sx:{mt:4},children:(0,l.jsx)(x.Z,{children:e===z.length?(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(a.Z,{children:"All steps are completed!"}),(0,l.jsx)(d.Z,{sx:{mt:4,display:"flex",justifyContent:"flex-end"},children:(0,l.jsx)(m.Z,{variant:"contained",onClick:ee,children:"Reset"})})]}):(0,l.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,l.jsxs)(r.ZP,{container:!0,spacing:5,children:[(0,l.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,l.jsx)(a.Z,{variant:"body2",sx:{fontWeight:600,color:"text.primary"},children:z[e].title}),(0,l.jsx)(a.Z,{variant:"caption",component:"p",children:z[e].subtitle})]}),(e=>{switch(e){case 0:return(0,l.jsx)(o.Fragment,{children:i?(0,l.jsx)(r.ZP,{item:!0,xs:12,textAlign:"center",children:(0,l.jsx)(N.Z,{})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(w.Z,{fullWidth:!0,label:"Order number",value:g,placeholder:"abc123",onChange:e=>v(e.target.value),onKeyDown:e=>{"Enter"===e.key&&$()}})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6}),_&&(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(a.Z,{variant:"caption",color:"error",children:_})})]})});case 1:var t;return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(w.Z,{fullWidth:!0,value:null==y?void 0:y.customer_name,label:"Customer Name",disabled:!0})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(w.Z,{fullWidth:!0,value:null==y?void 0:y.customer_email,label:"Customer Email",disabled:!0})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(w.Z,{fullWidth:!0,value:null==y?void 0:y.company_name,label:"Company Name",disabled:!0})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6}),null==y?void 0:null===(t=y.customer_address)||void 0===t?void 0:t.map((e,t)=>(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(w.Z,{fullWidth:!0,value:e,label:"Address ".concat(t+1),disabled:!0})},t)),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:3,children:(0,l.jsx)(w.Z,{fullWidth:!0,value:null==y?void 0:y.address_city,label:"City",disabled:!0})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:3,children:(0,l.jsx)(w.Z,{fullWidth:!0,value:null==y?void 0:y.address_state,label:"State",disabled:!0})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:3,children:(0,l.jsx)(w.Z,{fullWidth:!0,value:null==y?void 0:y.address_country,label:"Country",disabled:!0})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:3,children:(0,l.jsx)(w.Z,{fullWidth:!0,value:null==y?void 0:y.address_zip,label:"Postcode",disabled:!0})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(n.Z,{sx:{width:"100%"}})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(b.Z,{title:"Products"}),(0,l.jsx)(Z._,{autoHeight:!0,rowHeight:62,rows:(null==y?void 0:y.items.map(e=>({...e,id:e.order_product_id})))||[],columns:Q,disableRowSelectionOnClick:!0,pageSizeOptions:[5,10,25,50],paginationModel:I,onPaginationModelChange:O})]})})]},e);case 2:return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(w.Z,{fullWidth:!0,label:"Tracking Number",value:T,placeholder:"abc123",onChange:e=>A(e.target.value)})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(w.Z,{select:!0,fullWidth:!0,label:"Vehicle",value:F,onChange:e=>q(Number(e.target.value)),sx:{mb:4},children:L.map(e=>(0,l.jsxs)(j.Z,{value:e.id,children:[e.car_plate," - ",e.car_model]},e.id))})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(f(),{selected:Y,showYearDropdown:!0,showMonthDropdown:!0,id:"form-layouts-tabs-date",placeholderText:"MM-DD-YYYY",customInput:(0,l.jsx)(E,{}),onChange:e=>B(e)})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(w.Z,{select:!0,fullWidth:!0,label:"Estimated Time of Arrival",value:V,onChange:e=>X(Number(e.target.value)),sx:{mb:4},children:G.map(e=>(0,l.jsxs)(j.Z,{value:e.id,children:[e.name," - ",e.time_range]},e.id))})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(n.Z,{})}),(0,l.jsx)(M.Z,{confirmImages:J,setConfirmImages:K})]},e);default:return"Unknown Step"}})(e),(0,l.jsxs)(r.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)(m.Z,{variant:"tonal",color:"secondary",disabled:0===e,onClick:U,children:"Back"}),(0,l.jsx)(m.Z,{variant:"contained",onClick:$,children:e===z.length-1?"Submit":"Next"})]})]})})})})]})};var O=i(82229);let L=()=>(0,l.jsx)(O.Z,{children:(0,l.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(s.Z,{title:(0,l.jsx)(a.Z,{variant:"h2",children:"Create Shipment"})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,mt:3,mb:3,children:(0,l.jsx)(n.Z,{})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(I,{})})]})});L.acl={action:"read",subject:"shipment-page"};var R=L},459:function(){}},function(e){e.O(0,[9198,3863,7693,8468,7375,3873,2229,1782,9774,2888,179],function(){return e(e.s=26140)}),_N_E=e.O()}]);